<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dr. FAP - Inteligência Artificial da FGP</title>
  <!-- Ajuste de caminho: CSS na mesma pasta que este HTML -->
  <link rel="stylesheet" href="../../src/assets/css/styles.css" />
  <style>
        /* Estilos principais do projeto */
body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    overflow-x: hidden;
}

#app {
    text-align: center;
    padding: 20px;
}



/* Estilos gerais */
body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    background-color: #001f64;
}

#app {
    text-align: center;
    padding: 20px;
}

/* Estilos para telas pequenas (smartphones) */
@media (max-width: 600px) {
    body {
        font-size: 14px;
    }

    #app {
        padding: 10px;
    }
}

/* Estilos para telas médias (tablets) */
@media (min-width: 601px) and (max-width: 1024px) {
    body {
        font-size: 16px;
    }

    #app {
        padding: 15px;
    }
}

/* Estilos para telas grandes (desktops) */
@media (min-width: 1025px) {
    body {
        font-size: 18px;
    }

    #app {
        padding: 20px;
    }
}


/* Exemplo de layout com Flexbox */
#app {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
}

header, main, footer {
    width: 100%;
    max-width: 1200px;
    margin: 10px;
    padding: 10px;
    background-color: #fff;
    border-radius: 5px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}

h1 {
    font-size: 2em;
    margin-bottom: 20px;
    text-align: center;
    background-color: aqua;
    border: green 5px solid;
}

#a {
    font-size: 1.5em;
    margin-bottom: 20px;
    text-align: center;
    background-color: aquamarine;
    position: relative;
    top: -25px;
    border: green 4px solid;
}

#b {
    font-size: 1.5em;
    margin-bottom: 20px;
    text-align: center;
    background-color: aquamarine;
    position: relative;
    top: -20px;
}

.align {
    text-align: center;
}

.button {
    display: flex;
    padding: 10px 20px;
    margin: 20px;
    background-color: #007BFF;
    color: #fff;
    text-decoration: none;
    border-radius: 5px;
    transition: background-color 0.3s ease;
    box-shadow: 0 20px 35px rgb(0, 0, 0);
    background: linear-gradient(135deg, #ffce00 0%, #ff9f00 100%);
}
.button:hover {
    background-color: #0056b3;
    padding: 1%;
}
.button:active {
    background-color: #004085;
    box-shadow: 0 10px 20px rgb(0, 0, 0);
}
.button:focus {
    outline: none;
    box-shadow: 0 0 5px rgba(0, 123, 255, 0.5);
}
.button:disabled {
    background-color: #007BFF;
    opacity: 0.5;
    cursor: not-allowed;
}


.imagemFundo {
    width: 100%;
    position: fixed;
    z-index: -1;
    top: 0;
    opacity: 0.5;
}

.whiteclass {
    color: white;
}

a {
    text-decoration: none;
}

#m {
    font-size: 1.5em;
    margin-bottom: 20px;
    text-align: center;
    position: relative;
    top: 70px;
}

#n {
    font-size: 1.5em;
    margin-bottom: 20px;
    text-align: center;
    position: relative;
    top: 70px;
}

#nbp {
    font-size: 1.5em;
    margin-bottom: 20px;
    text-align: center;
    position: relative;
    top: 70px;
}


h1 {
    text-align: center;
    color: #1a0000;
    font-size: 2.5rem;
    margin-top: 20px;
    margin-bottom: 20px;
    text-shadow: 2px 2px 4px #000000;
    font-family: 'Arial', sans-serif;
    font-weight: bold;
    text-transform: uppercase;
    letter-spacing: 2px;
}
p.align {
    text-align: center;
    color: #b5b800;
    font-size: 1.5rem;
    margin-top: 20px;
    margin-bottom: 20px;
    text-shadow: 2px 2px 4px #000000;
    font-family: 'Arial', sans-serif;
    font-weight: bold;
    text-transform: uppercase;
    letter-spacing: 2px;
}

.logoGame {
    width: 150px;
    border-radius: 10%;
    border: 2px solid #000;
}

.container {
    max-width: 600px;
    margin: 0 auto;
    padding: 20px;
    text-align: center;
    background-color: #f9f9f9;
    border-radius: 10px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}

h1 {
    font-size: 2rem;
    margin-bottom: 20px;
}

form {
    margin-bottom: 20px;
}

label {
    display: block;
    margin: 10px 0 5px;
}

input {
    width: 100%;
    padding: 10px;
    margin-bottom: 10px;
    border: 1px solid #ccc;
    border-radius: 5px;
}

button {
    background-color: #007bff;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 5px;
    cursor: pointer;
}

button:hover {
    background-color: #0056b3;
}

/* Estilo para mensagens de alerta */
.alert-message {
    color: red;
    font-weight: bold;
}
    /* Estilos base, mantidos aqui de fallback se o CSS externo der problema */
    body {
      font-family: 'Arial', sans-serif;
      background-color: #0f1d25;
      color: #ffffff;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    #chat-container {
      width: 80%;
      max-width: 600px;
      background: rgba(15, 35, 45, 0.9);
      border-radius: 15px;
      box-shadow: 0px 0px 20px rgba(0, 255, 150, 0.4);
      overflow: hidden;
      margin-top: 40px;
    }
    #chat-box {
      height: 400px;
      overflow-y: auto;
      padding: 15px;
      display: flex;
      flex-direction: column;
    }
    .user-message {
      background: #007bff;
      color: white;
      padding: 10px;
      border-radius: 10px;
      margin: 5px;
      align-self: flex-end;
      max-width: 80%;
      font-size: 16px;
    }
    .bot-message {
      background: #00aa88;
      color: white;
      padding: 10px;
      border-radius: 10px;
      margin: 5px;
      align-self: flex-start;
      max-width: 80%;
      font-size: 16px;
    }
    .typing-animation {
      font-style: italic;
      opacity: 0.7;
    }
    #input-container {
      display:     INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)flex;
      padding: 10px;
      background: rgba(0, 0, 0, 0.1);
    }
    #user-input {
      flex: 1;
      padding: 10px;
      font-size: 16px;
      border: none;
      outline: none;
      border-radius: 10px;
    }
    #send-btn {
      background: linear-gradient(45deg, #00ffcc, #0099ff);
      color: white;
      padding: 10px 20px;
      font-size: 16px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      margin-left: 10px;
      transition: 0.3s;
    }
    #send-btn:hover {
      background: linear-gradient(45deg, #0099ff, #00ffcc);
      box-shadow: 0px 0px 10px rgba(0, 255, 150, 0.6);
    }
    @media screen and (max-width: 600px) {
      #chat-container { width: 90%; }
    }
  </style>
</head>
<body>
  <div id="chat-container">
    <h1>Dr. FAP - IA da FGP</h1>
    <div id="chat-box"></div>
    <div id="input-container">
      <input type="text" id="user-input" placeholder="Digite sua pergunta..." />
      <button id="send-btn">Enviar</button>
    </div>
  </div>

  <script>
    // Efeito Typewriter
    function typeWriter(element, text, speed = 50) {
      element.textContent = '';
      let i = 0;
      (function addChar() {
        if (i < text.length) {
          element.textContent += text.charAt(i++);
          setTimeout(addChar, speed);
        }
      })();
    }

    // Cria mensagem no chat
    function createMessage(text, className) {
      const msg = document.createElement('div');
      msg.classList.add(className);
      msg.textContent = text;
      return msg;
    }

    async function getFAPResponse(input) {
  try {
    const response = await fetch('http://127.0.0.1:8000/drfap', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ message: input })
    });
    if (!response.ok) throw new Error(`HTTP ${response.status}`);
    const data = await response.json();
    return data.response;
  } catch (error) {
    console.error('Erro ao chamar Dr.FAP:', error);
    return 'Desculpe, não consegui me comunicar com o servidor. eu ainda estou em desenvolvimento.';
  }
}

    // Manipula o envio de mensagens
    async function handleInput() {
      const inputEl = document.getElementById('user-input');
      const chatBox = document.getElementById('chat-box');
      const text = inputEl.value.trim();
      if (!text) return;

      // Mensagem do usuário
      const userMsg = createMessage(text, 'user-message');
      chatBox.appendChild(userMsg);
      inputEl.value = '';

      // Mensagem de placeholder do bot
      const botMsg = createMessage('', 'bot-message');
      chatBox.appendChild(botMsg);
      chatBox.scrollTop = chatBox.scrollHeight;

      botMsg.classList.add('typing-animation');
      const reply = await getFAPResponse(text);
      botMsg.classList.remove('typing-animation');

      typeWriter(botMsg, reply, 30);
      chatBox.scrollTop = chatBox.scrollHeight;
    }

    // Eventos
    document.getElementById('send-btn').addEventListener('click', handleInput);
    document.getElementById('user-input').addEventListener('keypress', e => {
      if (e.key === 'Enter') handleInput();
    });

    // Boas-vindas
    window.onload = () => {
      const welcome = createMessage('Dr. FAP: Olá! Em que posso ajudar hoje?', 'bot-message');
      document.getElementById('chat-box').appendChild(welcome);
    };
  </script>
</body>
</html>
